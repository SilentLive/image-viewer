{"version":3,"file":"viewer.min.js","sources":["../viewer.js"],"names":["window","ImageViewer","canvasId","imageUrl","options","isState","checkState","state","states","importPolygon","vertexArray","length","Polygon","initialVertex","createVertex","x","y","current","next","i","equals","exportPolygon","polygon","exportedPolygon","vertices","getVertices","push","position","onImageLoad","scale","canvas","height","self","image","width","centre","dirty","render","ctx","context","clearRect","save","translateX","translateY","translate","drawImage","restore","solutionVisible","solution","drawPolygon","annotationsVisible","annotations","forEach","annotation","color","solutionEditable","annotationsEditable","activePolygon","getLength","isClosed","lastVertexPosition","getLastVertex","mousePosition","convertToImagePosition","mouseLastPos","drawLine","defaultLineWidth","answerVisible","answer","drawAnswer","drawButtons","stopRendering","requestAnimationFrame","from","to","lineColor","lineWidth","strokeStyle","translation","convertToCanvasTranslation","relativeToPosition","drawPos","beginPath","moveTo","lineTo","stroke","padding","radius","gap","buttons","draw","currentTooltip","globalAlpha","fontSize","font","textSize","measureText","rectWidth","rectHeight","rectX","rectY","textX","textY","fillStyle","drawRoundRectangle","fillText","fill","quadraticCurveTo","closePath","canvasPosition","visiblePart","canvasImage","imagePosition","newVertex","Vertex","onClick","deleteVertex","onSolutionChange","exportSolution","isInitialVertex","close","DEFAULT","onMouseDown","activeMoveElement","leftMouseButtonDown","this","handleWidth","drawVertexHandle","vertex","focusUIElement","rect","polygonInstance","fillColor","strokeColor","handle","isLeft","p0","p1","p2","addNewAnnotation","newAnnotation","annotationColors","cleanupAnnotations","filter","getAnswerColor","canvasAnswer","isWithinBounds","shapeScale","transalation","shadowColor","shadowBlur","drawAwesomeIcon","getUIElements","collectedUIElements","concat","map","getUIElement","evt","getBoundingClientRect","pos","clientX","left","clientY","top","activeUIElement","uiElement","button","activeElement","onMouseUp","onMouseClick","clickPos","shiftKey","newVertexPosition","console","log","addVertex","onMouseWheel","event","preventDefault","detail","wheelDelta","zoomOut","zoomIn","onMouseMove","newPos","deltaX","deltaY","oldToolTip","tooltip","Button","icon","drawPosition","drawRadius","alpha","iconColor","enabled","enabledAlpha","alert","centreX","centreY","size","addEventListener","eventTarget","eventType","listener","events","removeAllEventListeners","_i","_current","_events","slice","removeEventListener","addEventListeners","document","initialize","src","Object","prototype","toString","call","importSolution","importAnnotations","zoomOutButton","zoomInButton","answerEditable","deleteAnswerButton","addAnswerButton","ANSWER_DRAW","defaultButtons","answerButtons","drawPolygonPointEnabled","drawPolygonPointOnClick","POLYGON_DRAW","movePolygonPointEnabled","movePolygonPointOnClick","POLYGON_MOVE","deletePolygonPointEnabled","deletePolygonPointOnClick","POLYGON_POINT_DELETE","drawSolutionPointButton","moveSolutionButton","deleteSolutionPointButton","deleteSolutionButton","solutionButtons","addNewAnnotationButton","drawAnnotationPointButton","moveAnnotationButton","deleteAnnotationPointButton","deleteAnnotationButton","deletePosition","splice","annotationButtons","mode","getElementById","getContext","scaleStep","ANNOTATION_DISPLAY","Image","importedSolution","exportAnnotations","importedAnnotations","importAnnotation","onAnnotationChange","other","last","deleted","currentVertex","indexOf","wn","p","dx","Math","abs","dy","isEnabled","arc","PI","globalCompositeOperation","dispose","refresh"],"mappings":"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"}