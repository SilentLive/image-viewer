{"version":3,"file":"viewer.min.js","sources":["../viewer.js"],"names":["window","ImageViewer","canvasId","imageUrl","options","isState","checkState","state","states","importPolygon","vertexArray","length","Polygon","initialVertex","createVertex","x","y","current","next","i","equals","exportPolygon","polygon","exportedPolygon","vertices","getVertices","push","position","onImageLoad","scale","canvas","height","self","image","width","centre","dirty","render","ctx","context","clearRect","save","translateX","translateY","translate","drawImage","restore","solutionVisible","solution","drawPolygon","annotationsVisible","annotations","forEach","annotation","color","solutionEditable","annotationsEditable","activePolygon","getLength","isClosed","lastVertexPosition","getLastVertex","mousePosition","convertToImagePosition","mouseLastPos","drawLine","defaultLineWidth","answerVisible","answer","drawAnswer","drawButtons","stopRendering","requestAnimationFrame","from","to","lineColor","lineWidth","strokeStyle","translation","convertToCanvasTranslation","relativeToPosition","drawPos","beginPath","moveTo","lineTo","stroke","padding","radius","gap","buttons","draw","currentTooltip","globalAlpha","fontSize","font","textSize","measureText","rectWidth","rectHeight","rectX","rectY","textX","textY","fillStyle","drawRoundRectangle","fillText","fill","quadraticCurveTo","closePath","canvasPosition","visiblePart","canvasImage","imagePosition","newVertex","Vertex","onClick","deleteVertex","onSolutionChange","exportSolution","cleanupAnnotations","onAnnotationChange","exportAnnotations","isInitialVertex","close","DEFAULT","onMouseDown","activeMoveElement","leftMouseButtonDown","this","handleWidth","drawVertexHandle","vertex","focusUIElement","rect","polygonInstance","fillColor","strokeColor","handle","isLeft","p0","p1","p2","addNewAnnotation","newAnnotation","annotationColors","filter","getAnswerColor","canvasAnswer","isWithinBounds","shapeScale","transalation","shadowColor","shadowBlur","drawAwesomeIcon","getUIElements","collectedUIElements","concat","map","getUIElement","evt","getBoundingClientRect","pos","clientX","left","clientY","top","activeUIElement","uiElement","button","activeElement","onMouseUp","onMouseClick","clickPos","shiftKey","newVertexPosition","console","log","addVertex","onMouseWheel","event","preventDefault","detail","wheelDelta","zoomOut","zoomIn","onMouseMove","newPos","deltaX","deltaY","oldToolTip","tooltip","Button","icon","drawPosition","drawRadius","alpha","iconColor","enabled","enabledAlpha","alert","centreX","centreY","size","addEventListener","eventTarget","eventType","listener","events","removeAllEventListeners","_i","_current","_events","slice","removeEventListener","addEventListeners","document","initialize","src","Object","prototype","toString","call","importSolution","importAnnotations","zoomOutButton","zoomInButton","answerEditable","deleteAnswerButton","addAnswerButton","ANSWER_DRAW","defaultButtons","answerButtons","drawPolygonPointEnabled","drawPolygonPointOnClick","POLYGON_DRAW","movePolygonPointEnabled","movePolygonPointOnClick","POLYGON_MOVE","deletePolygonPointEnabled","deletePolygonPointOnClick","POLYGON_POINT_DELETE","drawSolutionPointButton","moveSolutionButton","deleteSolutionPointButton","deleteSolutionButton","solutionButtons","addNewAnnotationButton","drawAnnotationPointButton","moveAnnotationButton","deleteAnnotationPointButton","deleteAnnotationButton","deletePosition","splice","annotationButtons","mode","getElementById","getContext","scaleStep","ANNOTATION_DISPLAY","Image","importedSolution","importedAnnotations","importAnnotation","other","last","deleted","currentVertex","indexOf","count","wn","p","dx","Math","abs","dy","isEnabled","arc","PI","globalCompositeOperation","dispose","refresh"],"mappings":"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"}